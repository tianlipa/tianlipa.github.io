<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="xnevF7kqEaJI7y45BmO0xpIUVUa0xusjcJ0MIFbvX2I">
  <meta name="msvalidate.01" content="0E006AA8DCC38A710D0287C1DD04DDCA">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.loli.net/css2?family=Lato:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha256-VHqXKFhhMxcpubYf9xiWdCiojEbY9NexQ4jh8AxbvcM=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"tianlipa.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.24.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":16,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeIn","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="概述 这笔记越做越觉得我像用十八种颜色划勾股定理重点的小红书学习博主. 不过不做这笔记我可能就再也不会看ppt了, 所以还是坚持一下吧. 主要功能:  成帧: 在接收方从比特流中恢复出帧, 关键在于确定帧开始和结束的地方, 即帧定界 数据帧可靠传输: 差错校验和流量控制 信道(链路)多路访问: 如何寻址以及控制对共享信道(链路)的访问, 为此在数据链路层引入了一个特殊的子层, 即介质访问控制子层">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机网络笔记 四.局域网与介质访问控制">
<meta property="og:url" content="https://tianlipa.github.io/2025/10/computer-network-4/index.html">
<meta property="og:site_name" content="tianlipa">
<meta property="og:description" content="概述 这笔记越做越觉得我像用十八种颜色划勾股定理重点的小红书学习博主. 不过不做这笔记我可能就再也不会看ppt了, 所以还是坚持一下吧. 主要功能:  成帧: 在接收方从比特流中恢复出帧, 关键在于确定帧开始和结束的地方, 即帧定界 数据帧可靠传输: 差错校验和流量控制 信道(链路)多路访问: 如何寻址以及控制对共享信道(链路)的访问, 为此在数据链路层引入了一个特殊的子层, 即介质访问控制子层">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://tianlipa.github.io/img/computer-network-4/1.png">
<meta property="og:image" content="https://tianlipa.github.io/img/computer-network-4/2.png">
<meta property="og:image" content="https://tianlipa.github.io/img/computer-network-4/3.png">
<meta property="og:image" content="https://tianlipa.github.io/img/computer-network-4/4.png">
<meta property="og:image" content="https://tianlipa.github.io/img/computer-network-4/5.png">
<meta property="og:image" content="https://tianlipa.github.io/img/computer-network-4/6.png">
<meta property="og:image" content="https://tianlipa.github.io/img/computer-network-4/7.png">
<meta property="og:image" content="https://tianlipa.github.io/img/computer-network-4/8.png">
<meta property="og:image" content="https://tianlipa.github.io/img/computer-network-4/9.png">
<meta property="og:image" content="https://tianlipa.github.io/img/computer-network-4/10.png">
<meta property="og:image" content="https://tianlipa.github.io/img/computer-network-4/11.png">
<meta property="og:image" content="https://tianlipa.github.io/img/computer-network-4/12.png">
<meta property="og:image" content="https://tianlipa.github.io/img/computer-network-4/13.png">
<meta property="og:image" content="https://tianlipa.github.io/img/computer-network-4/14.png">
<meta property="og:image" content="https://tianlipa.github.io/img/computer-network-4/15.png">
<meta property="og:image" content="https://tianlipa.github.io/img/computer-network-4/16.png">
<meta property="og:image" content="https://tianlipa.github.io/img/computer-network-4/17.png">
<meta property="og:image" content="https://tianlipa.github.io/img/computer-network-4/18.png">
<meta property="og:image" content="https://tianlipa.github.io/img/computer-network-4/19.png">
<meta property="og:image" content="https://tianlipa.github.io/img/computer-network-4/20.png">
<meta property="og:image" content="https://tianlipa.github.io/img/computer-network-4/21.png">
<meta property="og:image" content="https://tianlipa.github.io/img/computer-network-4/22.png">
<meta property="og:image" content="https://tianlipa.github.io/img/computer-network-4/23.png">
<meta property="og:image" content="https://tianlipa.github.io/img/computer-network-4/24.png">
<meta property="og:image" content="https://tianlipa.github.io/img/computer-network-4/25.png">
<meta property="og:image" content="https://tianlipa.github.io/img/computer-network-4/26.png">
<meta property="og:image" content="https://tianlipa.github.io/img/computer-network-4/27.png">
<meta property="og:image" content="https://tianlipa.github.io/img/computer-network-4/28.png">
<meta property="og:image" content="https://tianlipa.github.io/img/computer-network-4/29.png">
<meta property="og:image" content="https://tianlipa.github.io/img/computer-network-4/30.png">
<meta property="og:image" content="https://tianlipa.github.io/img/computer-network-4/31.png">
<meta property="article:published_time" content="2025-10-29T14:45:31.000Z">
<meta property="article:modified_time" content="2025-11-01T10:07:41.382Z">
<meta property="article:author" content="tianlipa">
<meta property="article:tag" content="笔记">
<meta property="article:tag" content="计算机网络">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://tianlipa.github.io/img/computer-network-4/1.png">


<link rel="canonical" href="https://tianlipa.github.io/2025/10/computer-network-4/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://tianlipa.github.io/2025/10/computer-network-4/","path":"2025/10/computer-network-4/","title":"计算机网络笔记 四.局域网与介质访问控制"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>计算机网络笔记 四.局域网与介质访问控制 | tianlipa</title>
  








  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script>

  






  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css" integrity="sha256-UF1fgpAiu3tPJN/uCqEUHNe7pnr+QR0SQDNfgglgtcM=" crossorigin="anonymous">



  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">tianlipa</p>
      <i class="logo-line"></i>
    </a>
      <div id="randomParagraph" class="site-subtitle" itemprop="description"></div>
      <script src="/js/subtitle.js"></script>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-收藏"><a href="/collection/" rel="section"><i class="fa fa-heart fa-fw"></i>收藏</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">tianlipa</p>
  <div class="site-description" itemprop="description">本站所有内容<br>都是我家猫写的<br>如有任何疑问<br>喵喵喵喵喵喵喵</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">108</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/tianlipa" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;tianlipa" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:tianlipa@qq.com" title="E-Mail → mailto:tianlipa@qq.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://steamcommunity.com/id/tianlipa" title="Steam → https:&#x2F;&#x2F;steamcommunity.com&#x2F;id&#x2F;tianlipa" rel="noopener me" target="_blank"><i class="fab fa-steam fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/tianlipa" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;tianlipa" rel="noopener me" target="_blank"><i class="fab fa-zhihu fa-fw"></i></a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://tianlipa.github.io/2025/10/computer-network-4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="tianlipa">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tianlipa">
      <meta itemprop="description" content="本站所有内容<br>都是我家猫写的<br>如有任何疑问<br>喵喵喵喵喵喵喵">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="计算机网络笔记 四.局域网与介质访问控制 | tianlipa">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          计算机网络笔记 四.局域网与介质访问控制
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-10-29 22:45:31" itemprop="dateCreated datePublished" datetime="2025-10-29T22:45:31+08:00">2025-10-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-11-01 18:07:41" itemprop="dateModified" datetime="2025-11-01T18:07:41+08:00">2025-11-01</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h2 id="概述">概述</h2>
<p>这笔记越做越觉得我像用十八种颜色划勾股定理重点的小红书学习博主. 不过不做这笔记我可能就再也不会看ppt了, 所以还是坚持一下吧.</p>
<p>主要功能:</p>
<ul>
<li>成帧: 在接收方从比特流中恢复出帧, 关键在于确定帧开始和结束的地方, 即帧定界</li>
<li>数据帧可靠传输: 差错校验和流量控制</li>
<li><strong>信道(链路)多路访问</strong>: 如何寻址以及控制对共享信道(链路)的访问, 为此在数据链路层引入了一个特殊的子层, 即介质访问控制子层</li>
</ul>
<p>相关协议:<br>
点对点链路: HDLC(High-Level Data Link Control), PPP(Point to Point Protocol),<br>
多路访问/共享链路: CSMA/CD, CSMA/CA</p>
<span id="more"></span>
<h2 id="LAN的基本概念">LAN的基本概念</h2>
<p>WAN: Wide Area Network 广域网, 几十~几千km</p>
<p>MAN: Metropolitan Area Network 城域网, 5~50km</p>
<p>LAN: Local Area Network 局域网, 几十米~1km</p>
<p>局域网LAN(Local Area Network)是在一个小区域范围内对各种数据通信设备提供互连的信息网.</p>
<p>决定局域网特性的主要技术:</p>
<ul>
<li>用以传输数据的<strong>传输媒体</strong></li>
<li>用以连接设备的<strong>拓扑结构</strong></li>
<li>用以共享资源的<strong>媒体访问控制方法</strong></li>
</ul>
<p>**局域网被定义为一个广播域, 早起局域网的构建基于共享(广播式)链路, 当前局域网采用L2交换机互连. **<br>
(广播域: 局域网内目的地址为广播地址的数据链路层帧会被所有的网络节点接收和处理. )</p>
<p>最常用的Internet接入网技术之一, 包括基于802.3的有线局域网(以太网), 基于802.11的无线局域网</p>
<p>参考模型: IEEE 802参考模型<br>
数据链路层被划分为两个子层<strong>LLC</strong>和<strong>MAC</strong></p>
<p><img src="/img/computer-network-4/1.png" alt=""></p>
<p>LLC: Logic Link Control, <strong>逻辑链路控制</strong>, 与传输媒体无关<br>
MAC: Medium Access Control, <strong>媒体接入控制</strong>, 你猜与传输媒体有没有关</p>
<p><img src="/img/computer-network-4/2.png" alt=""></p>
<p>将数据链路层划分为两个子层的原因:</p>
<ul>
<li>在传统链路控制(如点对点通信的串行链路)中, 没有管理访问共享(广播式)介质的逻辑需求 , MAC子层负责对共享介质的访问进行控制</li>
<li>对于相同的LLC子层, 可以提供不同的MAC子层. 例如, 常用以太网, 802.11无线局域网等局域网具有相同的LLC子层, 只是MAC子层不同.</li>
</ul>
<p><img src="/img/computer-network-4/3.png" alt=""></p>
<p><img src="/img/computer-network-4/4.png" alt=""></p>
<h3 id="LLC">LLC</h3>
<h4 id="服务">服务</h4>
<p>LLC是一个对所有LAN都相同的链路层协议, 定义了两个用户之间数据交换的机制, 向网络层提供了三种类型的服务:</p>
<ul>
<li>无确认, 无连接</li>
<li>有确认, 无连接</li>
<li>面向连接</li>
</ul>
<p>对LAN, 无确认的非连接服务是优先考虑的选项, 但在非可靠网络环境如无线网络, 一般使用有确认无连接网络.</p>
<p>流量控制</p>
<h4 id="协议">协议</h4>
<p>类似HDLC协议, 定义了三种格式:</p>
<ul>
<li>信息帧</li>
<li>监控帧</li>
<li>无编号帧</li>
</ul>
<p>注意, 对于很多数据链路层协议(如以太网)使用无确认无连接服务, IP分组直接封装到MAC帧中, 没有LLC子层.</p>
<h3 id="MAC">MAC</h3>
<p><strong>多路访问控制</strong>: MAC对由多个节点共享的传输介质(有线介质或无线信道)对进行访问控制</p>
<p><strong>寻址</strong>: MAC层定义了数据链路层地址. 在共享介质上, 节点根据帧的目的MAC地址决定是否处理接收到的帧.</p>
<p>节点上的网络接口设备都有一个MAC地址, 接收以下帧:</p>
<ul>
<li>帧的目的MAC地址与自己相同</li>
<li>帧的目的MAC地址为广播地址</li>
</ul>
<p><strong>移动管理</strong>: 在无线局域网中, MAC实现移动管理(切换)</p>
<p>经过局域网络数据链路层处理后的数据单元也被称为MAC帧, MAC帧的通用格式如下:</p>
<p><img src="/img/computer-network-4/5.png" alt=""></p>
<p>MAC地址是网络接口设备例如网卡的物理地址, 一般购买这些设备时就固化在设备的内部, 它用来标识连接在LAN上的网络接口的物理接入点.</p>
<h3 id="物理层技术">物理层技术</h3>
<p>传输介质:</p>
<ul>
<li>电缆(包括双绞线, 同轴电缆等, 最常用的是增强型五类非屏蔽双绞线, 六类非屏蔽双绞线等)</li>
<li>光纤(包括单模光纤和多模光纤)</li>
<li>无线传输(包括无线电波, 红外线等)</li>
</ul>
<p>网络拓扑: 星型, 环形, 总线型, 树型</p>
<h2 id="多路访问协议">多路访问协议</h2>
<p><strong>多路访问信道(广播信道)</strong>: 多个用户共享的同一条链路, 如果一个用户发送, 则其它用户都能侦听到.</p>
<p><strong>多路访问协议</strong>: 控制多个用户对广播信道的访问, 尽量避免多个用户同时开始帧发送, 因为这样会导致冲突(collision).</p>
<p><strong>多路访问协议的作用就是在多个竞争的用户之间分配多路访问信道.</strong></p>
<p>设计原则:</p>
<ul>
<li>简单, 易于实现</li>
<li>有效的介质利用率</li>
<li>对用户公平合理</li>
</ul>
<p>对于广播信道, 需要解决信道分配问题, 分配方案有:</p>
<ul>
<li><strong>静态分配</strong>: 如FDM和TDM, 如果有N个用户, 把带宽(频率范围)或时间分成N份, 每个用户静态地占用一个. 缺点: 不能有效处理突发数据, 且用户无数据传输时浪费资源, 灵活性差</li>
<li><strong>动态分配</strong>: 异步时分复用, 主要分为:
<ul>
<li><strong>随机访问(争用contention)</strong>: 只要有数据就可以发送, 发生冲突后再采取措施解决冲突, 适用于负载轻的网络, 负载重时效率低, 如<strong>ALOHA</strong>, <strong>CSMA</strong>.</li>
<li><strong>控制访问(无争用contention-free)</strong>: 发送用户必须先获得发送的权利再发送数据, 不会发生冲突. 在负载重的网络中可获得很高的信道利用率, 主要有<strong>轮询</strong>(round-robin-polling)和预留(reservation)两种方式.</li>
</ul>
</li>
</ul>
<p>结合争用和无争用协议的优势, 人们提出了<strong>有限竞争(limited-contention)协议</strong>.</p>
<h3 id="ALOHA协议">ALOHA协议</h3>
<p>ALOHA在夏威夷语中既是你好也是再见, 但是这和ALOHA协议没有什么关系.</p>
<p>在ALOHA系统中, 每个站给中央计算机发送帧之后, 中央计算机把该帧重新广播给所有站.</p>
<p>有两个版本:</p>
<ul>
<li><strong>纯ALOHA协议(Pure ALOHA)</strong>: 每个站点只要有数据就可任意时间发送; 通过监听信道, 发现是否发生冲突; 若冲突, 则等待一段随机时间, 再重新发送.</li>
<li><strong>时隙ALOHA协议(Slotted ALOHA)</strong>: 将信道时间分为离散的时间片(Time Slot), 每个时间片可以用来发送一个帧; 每个站点的数据发送<strong>只能在某个时间片的开始</strong>才能发送; 若冲突, 则等待一段随机时间(以时间片为单位), 再重新发送. 与纯ALOHA相比信道的利用率提高一倍.</li>
</ul>
<p>还有, 夏威夷.</p>
<h3 id="CSMA协议">CSMA协议</h3>
<p><strong>载波侦听多路访问Carrier Sense Multiple Access</strong>, 各站点不是随意发送数据帧, 而是先监听一下信道, 根据信道状态调整自己的动作, 只有发现信道空闲后才会发送, 即&quot;讲前先听&quot;, 通过载波侦听和随机等待(发送), 尽量避免发送时产生冲突.</p>
<p>常见的四种CSMA协议:</p>
<ul>
<li>1-坚持型CSMA(1-persistent CSMA)</li>
<li>非坚持型CSMA(non-persistent)</li>
<li>p-坚持型CSMA(p-persistent CSMA)</li>
<li><strong>CSMA/CA (CSMA with Collision Avoid)</strong></li>
<li><strong>CSMA/CD(CSMA with Collision Detection)</strong></li>
</ul>
<h4 id="1-坚持型CSMA">1-坚持型CSMA</h4>
<p>要发送数据帧时监听信道, 若信道忙, 则坚持监听, 一旦检测到信道空闲就立即发送(发送概率为1), 若发生冲突, 则等待一段随机长时间, 然后再次检测和发送.</p>
<p>发生冲突的可能:</p>
<ul>
<li>
<p>信号传输的延迟造成的冲突</p>
</li>
<li>
<p>多个站点在监听到信号空闲时同时开始发送</p>
</li>
<li>
<p>性能高于ALOHA协议</p>
</li>
</ul>
<h4 id="非坚持型CSMA">非坚持型CSMA</h4>
<p>要发送数据帧时监听信道, 若信道忙, 则随机等待一段时间再开始监听信道(非坚持)</p>
<p>信道利用率高于1-持续CSMA协议, 但延迟更大</p>
<h4 id="p-坚持型CSMA">p-坚持型CSMA</h4>
<p>用于分槽信道. 分槽信道: 将连续的时间轴划分成一个个固定长度, 离散的时间间隔, 每个间隔称为一个&quot;时槽&quot;.</p>
<p>要发送数据帧时监听信道, 若信道忙, 则等到下个时槽开始再监听信道; 若信道空闲, 以概率p发送, 以概率1-p推迟到下个时槽再重复上述过程.</p>
<p>概率p的目的就是试图降低1-持续CSMA协议中多个站点同时发送而造成冲突的概率.</p>
<p>采用持续监听是为了克服非持续CSMA协议带来的延迟.</p>
<p><img src="/img/computer-network-4/6.png" alt=""></p>
<h3 id="轮询协议">轮询协议</h3>
<p>802.11 PCF操作模式</p>
<p><img src="/img/computer-network-4/7.png" alt=""></p>
<p>PCF: Point Coordination Function,点协调功能<br>
AP(无线接入点Access Point)和站点工作在同一个信道(共享链路)上, 由中心点AP来控制所有站点对共享无线信道的访问, AP按顺序轮询(Poll)站点是否有帧要发送, 不会发生冲突.</p>
<h2 id="以太网">以太网</h2>
<h3 id="概述-2">概述</h3>
<p>经典以太网在总线型共享链路上以10Mbps的速率工作, 也称为10M以太网, 对应标准802.3. 注意, 一般使用时常常不区分&quot;以太网&quot;和&quot;IEEE 802.3&quot;.</p>
<p>传输介质:</p>
<ul>
<li>10Base-T: 10表示速率为10Mbps, base表示使用基带信号传输, T表示传输介质是双绞线,</li>
<li>10Base-F表示传输介质是光纤</li>
<li>100Base-TX: 100表示速率为100Mbps, TX表示传输介质为双绞线, 通信模式为全双工</li>
<li>1000Base-LX, 1000Base-SX, 1000Base-CX, 1000Base-T: LX(长波长): 多模光纤≤850m, 单模光纤≤ 3000m<br>
SX(短波长): 多模光纤≤220m(62.5/125um), 以及≤500m(50/125um)<br>
CX: 屏蔽双绞线≤25m, 交换机之间, 以及主干交换机和主服务器之间的短距离连接<br>
T: 非屏蔽双绞线≤100m</li>
</ul>
<p><strong>由于以太网使用的传输介质的误码率很小, 因此以太网的LLC一般提供的是无确认的非连接服务.</strong></p>
<h3 id="经典以太网">经典以太网</h3>
<p>经典以太网在总线型共享链路上以10Mbps的速率工作, 也称为10M以太网, 对应标准为802.3.</p>
<p>传输介质: 同轴电缆(10Base-5, 10Base-2, 已经很少使用了), 双绞线(10Base-T)及光纤(10Base-F)</p>
<p>通过MAC层控制多台主机竞争访问共享链路.</p>
<p>共享链路的问题:</p>
<ul>
<li><strong>寻址问题</strong>: 共享链路上任何主机都能接收其它主机发来的数据, 因此需要一种机制指明数据的发送者和接收者.<br>
解决方法: 每台主机(网络接口)都有一个唯一的MAC地址, 主机发送的数据帧头标中包含了发送和接收这个帧的主机的MAC地址, 即源和目的MAC地址 .</li>
<li><strong>访问控制问题</strong>: 在共享链路上, 需要一种机制协调所有主机之间的数据发送, 以公平竞争访问链路.<br>
解决方法: 每台主机上运行CSMA/CD机制来竞争对共享链路的访问, 为了确保公平性, 每次发送数据帧都有最大长度限制(数据域部分不超过1500字节), 发送完后主机要重新竞争.</li>
</ul>
<p>冲突Collision, 也称碰撞, 是多台主机争用传输介质引起的. 连接在共享链路上的两台或两台以上主机同时发送数据时, 表示这些数据的信号将在同一段传输介质上叠加, 从而导致无法正确接收.</p>
<p>主机边发送数据边检测信道上电压大小, 如果信号电压摆动值超过一定的门限值时, 就认为传输介质上至少有两台主机同时在发送数据, 表明产生了冲突.</p>
<h4 id="CSMA-CD">CSMA/CD</h4>
<p>CSMA/CD: Carrier Sense Multiple Access with Collision Detection, <strong>带冲突检测的载波侦听多路访问</strong>.</p>
<p>关键步骤:</p>
<ul>
<li><strong>载波侦听</strong>Carrier Sense: 发前先听, 想要发送数据时首先侦听介质是否繁忙.</li>
<li><strong>冲突检测</strong>Collision Detection: 如果主机在发送过程中检测到冲突, 则发送干扰信号, 确保所有主机都知道发生了冲突并且取消发送.</li>
</ul>
<p><strong>传播延迟机制</strong>:<br>
勘测到冲突的必要条件是干扰信号到达发送方时发送方还在发送数据, 因此冲突检测过程与数据在传输介质上的传播延时相关.<br>
最大电缆长度限制: 2500m<br>
最小帧长限制: 64字节</p>
<p><img src="/img/computer-network-4/8.png" alt=""></p>
<p>往返传播延迟2T=51.2μs, 发送1比特延迟=100ns<br>
由帧发送延迟≥2T, 可以得到最小帧长64字节(即512比特)<br>
最小帧长/10Mbps ≥ 51.2μs<br>
最小帧长 ≥ 51.2μs × 10Mbps</p>
<p><strong>退避算法机制</strong>:<br>
主机检测到冲突后退避(backoff)一个随机的时间.</p>
<p>通过<strong>二进制指数退避算法</strong>确定冲突后的随机等待时间:</p>
<ul>
<li>在一次冲突之后, 时间被划分为离散的时槽, 其长度等于最差情况下在以太网介质上往返传播所需要的时间, 时槽与以太网所允许的介质最大长度有关, 一般设置为51.2μs.</li>
<li>在第k次冲突发生后, 从离散整数集合<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msup><mn>2</mn><mi>k</mi></msup><mo>−</mo><mn>1</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{0,1,\dots ,2^k-1\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0991em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">}</span></span></span></span>中随机选择一个数r, 然后等待r个时槽. 对于第一次冲突, 就是等待0或者1个时槽后再次尝试发送, 对于第二次冲突, 随机选择0, 1, 2或者3, 然后等待这么多个时槽.</li>
<li>若k≥10, 保持离散整数集合0-1023不变, 从中选择一个随机数r, 等待r个时槽.</li>
<li>若k&gt;16, 放弃发送并产生一个错误.</li>
</ul>
<p>CSMA/CD+退避算法:</p>
<p><img src="/img/computer-network-4/9.png" alt=""></p>
<h3 id="快速以太网">快速以太网</h3>
<p>100Mbps以太网也称快速以太网, 对应标准802.3u.</p>
<p>向前兼容802.3, 保留原来802.3的帧格式, 接口和过程规则, 只是将发送1bit所需的时间从100ns降低到10ns, 因此电缆的最大长度也降低到原来的十分之一, 即250米.</p>
<p>传输介质: 双绞线(100Base-TX , 全双工, 非屏蔽5类双绞线UTP ), 光纤(100Base-FX )</p>
<p>两种工作模式:</p>
<ul>
<li>主机通过集线器互连(Hub)</li>
<li>主机通过二层交换机互连(Switch)</li>
</ul>
<p><strong>集线器互连(Hub)</strong>:</p>
<ul>
<li><strong>需要使用CSMA/CD机制</strong>, 集线器的所有端口在逻辑上都连在一起, 构成一个冲突(碰撞)域</li>
<li><strong>半双工通信</strong>: 同一时刻只有一台主机可以发送数据</li>
</ul>
<p><strong>通过集线器互连只能实现半双工通信.</strong></p>
<p><strong>交换机互连(Switch)</strong>:</p>
<ul>
<li><strong>不需要使用CSMA/CD机制</strong>, 连接在交换机上的每台主机都构成了一个单独的冲突域</li>
<li><strong>全双工</strong>: 发送和接收过程分开, 例如100Base-TX, 有两对双绞线, 一对用于发送, 一对用于接收.</li>
</ul>
<p>交换机中, 每个输入的数据帧都被缓存起来, 然后根据目的MAC地址通过高速背板被转发到相应的输出端口.</p>
<p>目前快速以太网主要使用二层交换机互连, 通过交换机构建的网络称为<strong>交换式以太网</strong>.</p>
<p><strong>通过交换机互连可以实现全双工通信.</strong></p>
<h3 id="千兆以太网">千兆以太网</h3>
<p>比快速以太网快十倍, 保持与现有以太网标准的向前兼容, 对应标准802.3z.</p>
<p>传输介质: 双绞线(1000Base-T, 标准的非屏蔽5类双绞线UPT, 1000Base-CX, 屏蔽双绞线), 光纤(1000Base-SX, 多模光纤, 1000Base-LX, 单模或者多模光纤 ), 叽里咕噜说什么呢.</p>
<p>两种工作模式:</p>
<ul>
<li>主机交换机互连, 全双工(Switch)</li>
<li>主机通过集线器互连, 半双工(Hub)</li>
</ul>
<p>交换机互连: 不需使用CSMA/CD机制, 全双工, 电缆的最大长度由信号的强度决定.</p>
<p><strong>绝大多数的千兆以太网使用交换机互连.</strong></p>
<p>集线器互连:</p>
<p>问题: 发送1bit所需时间为1ns, 如果使用64字节的最小帧长, 为检测到冲突, 电缆最大长度为25m.</p>
<p>解决方法, 可以将电缆最大长度扩充到200m:</p>
<ul>
<li>载荷扩充Carrier Extension, 本质是让硬件在普通的帧后面增加一些填充数据, 以便将数据帧的长度扩充到512字节, 这种填充对于上层软件是透明的.</li>
<li>帧串frame bursting, 允许发送方将多个帧连接在一起, 把它们串起来一起传输出去. 如果整个串小于512字节, 则硬件会再次对它们进行填充.</li>
</ul>
<p><strong>半双工通信: 连接在集线器上的所有主机构成一个冲突域.</strong></p>
<h3 id="万兆以太网">万兆以太网</h3>
<p>万兆以太网比千兆以太网快多少倍至今仍是工程学的未解之谜, 无数科学家把一生投入这个问题的研究, 却未能获得一点成果.</p>
<p>工作速率为10Gbps, 对应标准802.3ae.</p>
<p>传输介质最开始只支持光纤(包括长波和短波), 后来在802.3an的标准中增加了对屏蔽双绞线(对应10GBASE-T)等介质的支持.</p>
<p>传输距离增强, 从300m到40km, 可用于构建MAN和WAN.</p>
<p><strong>只支持全双工通信</strong></p>
<p>更高速以太网: 40Gbps, 100Gbps, 200Gbps, 400Gbps, …</p>
<h3 id="MAC帧格式">MAC帧格式</h3>
<p>常用以太网MAC帧格式有两种标准:</p>
<ul>
<li><strong>DIX Ethernet V2标准</strong>(最常用)</li>
<li>IEEE的802.3标准</li>
</ul>
<p><img src="/img/computer-network-4/10.png" alt=""></p>
<p>所有类型的以太网的MAC帧格式标准都是统一的.</p>
<p><img src="/img/computer-network-4/11.png" alt="image-20251101163600263"></p>
<p>PA:  先导域 -  10101010序列, 用于使接收方与发送方同步<br>
SFD:  帧起始定界符 – 10101011<br>
DA:  目的MAC地址;   SA:  源MAC地址<br>
LEN: 数据长度(数据部分的字节数)(0-1500B)<br>
大于1500标识高层协议 (0X0800,上层使用IP)<br>
LLC PDU+pad – LLC协议数据单元加填充, 最少46字节, 最多1500字节<br>
Pad: 填充字段, 保证帧长不少于64字节(0~46字节, 若数据域≥46字节, 则无Pad)<br>
FCS:  帧校验序列(CRC-32)</p>
<h3 id="组播和广播">组播和广播</h3>
<p><img src="/img/computer-network-4/12.png" alt=""></p>
<p><strong>组播(Multicast)</strong>: MAC地址的I/G比特为0, 表示的是普通的地址, 如果为1, 则表示组地址. 利用组地址, 在以太网内, 可以将一个数据帧发给加入了这个组的多台主机, 这种数据发送方式也称为组播.</p>
<p><strong>广播(Broadcast)</strong>: 全1的MAC地址(FF:FF:FF:FF:FF:FF)被称为广播地址. 如果数据帧的目的地址为广播地址, 那么以太网内所有的主机都会接收该帧.</p>
<h2 id="802-11无线局域网">802.11无线局域网</h2>
<p>md这章怎么这么长啊</p>
<p><strong>无线局域网WLAN Wireless Local Area Network</strong></p>
<p>无线电波按照工作的频率的不同被划分为信道, 每个信道对应着一个频率范围(频段), WLAN通信是建立在无线信道的基础上的.</p>
<p>WLAN标准: 802.11系列标准(IEEE802.11工作组制定), Hiper LAN系列标准(ETSI的BRAN小组制定).</p>
<p>以下讨论都是基于802.11系列标准的无线局域网.</p>
<p>Wi-Fi联盟: 由工业界发起成立的一个全球性的非盈利组织, 负责测试和认证兼容IEEE 802.11系列协议的设备, 并且对于通过测试和认证的设备打上Wi-Fi认证标志.</p>
<h3 id="网络组成">网络组成</h3>
<ul>
<li><strong>无线站点STA(wireless STAtion)</strong>: 配置支持802.11协议的无线网卡的终端; STA通过MAC层机制来共享同一个无线信道, 最简单的WLAN仅仅由STA组成 , 它们之间直接通信.</li>
<li><strong>无线接入点AP(wireless Access Point), 有时也被称为基站BS(Base Station)</strong>: 数据链路层设备, AP为STA之间的通信提供帧转发功能.</li>
</ul>
<p><img src="/img/computer-network-4/13.png" alt=""></p>
<p>在无线局域网中, AP一般同时有802.3和802.11接口, 实现网桥功能, 包括:</p>
<ul>
<li><strong>不同帧格式转换</strong>: 由于帧格式的不同, 需要重新组帧, 某些域需要丢弃或产生还需要重新生成检验和.</li>
<li><strong>不同的数据速率适配</strong>: 由于802.11速率低, 网桥需要用缓冲区存储来不及传输的帧.</li>
</ul>
<h3 id="网络拓扑">网络拓扑</h3>
<p>Ad Hoc网络, 也称为自组织网络: 仅由STA之间通过无线传输介质组成的网络, 这些STA在彼此无线信号覆盖范围内, 因此之间能够互相通信.</p>
<p>基础设施网络: 在基础设施网络中, STA之间不能直接通信, 所有的通信都必须经过AP; 每个AP都配置了一个网络名(SSID), STA必须配置和AP相同的网络名.</p>
<p><img src="/img/computer-network-4/14.png" alt=""></p>
<p><img src="/img/computer-network-4/15.png" alt=""></p>
<p>DS (Distributed System): 分布式系统,  可以是一个交换机, 一个有线网络或者一个无线网络.</p>
<h3 id="无线局域网的特点">无线局域网的特点</h3>
<p>优势:</p>
<ul>
<li>快速部署, 不需要进行繁琐的布线操作</li>
<li>支持移动漫游</li>
<li>易于扩展</li>
</ul>
<p>问题:</p>
<ul>
<li>传输速率和效率</li>
<li>移动终端功耗</li>
<li>安全性</li>
</ul>
<p>发展历程和历代标准我懒得记了</p>
<h3 id="体系结构">体系结构</h3>
<p>采用IEEE802参考模型; IEEE 802参考模型由IEEE 802委员会开发,并且被所有的制定LAN标准的组织所采用.</p>
<p><img src="/img/computer-network-4/16.png" alt=""></p>
<p>所有802.11系列协议具有相同的MAC子层, 不同的是物理层.</p>
<h3 id="信道分配">信道分配</h3>
<p>对于Ad Hoc网络, 要求所有的STA都工作在同一个信道;<br>
对于基础设施网络, STA必须和其关联的AP工作在同一个信道.</p>
<p>信道分配问题: 如何在同一个区域部署多个Ad Hoc网络或者多个AP, 使得它们之间的干扰尽量小?</p>
<p>访问控制问题: 如何控制多个STA对同一个信道的访问?</p>
<h3 id="信道划分">信道划分</h3>
<p>802.11工作在两个ISM频段(非授权频段), 即2.4GHz频段和5GHz.</p>
<p>对于802.11b, 整个2.4G频段被划分为14个信道, 每个信道的带宽为22MHz.</p>
<p>在802.11中, 每个站点或者AP使用某个信道, 也被称为工作信道.</p>
<p><img src="/img/computer-network-4/17.png" alt=""></p>
<p>为了避免信道间干扰, 同一区域内的Ad Hoc网络或AP的工作信道不能重叠, 中心频率间隔最少为25MHz, 因此同一区域最多只能有3个工作在不同信道的Ad Hoc网络或AP.</p>
<p>11个信道 : 每个信道占用22 MHz, 有且只有1个信道集合中有3个互不重叠的信道{1, 6, 11}.</p>
<p>14信道 : 每个信道占用22MHz, 可划分为4个具有3个互不重叠信道的信道集合{1, 6, 11}, {2, 7, 12}, {3, 8, 13}, {4, 9, 14}, 但每次只能使用一个信道集合.</p>
<p><strong>5G/6G频段下的信道划分</strong>:</p>
<p>5GHz频段比2.4G频段拥有更多的20MHz信道, 范围从5170MHz扩展到5835MHz, 但其可用频段并不连续. 且相邻信道之间是不重叠的.</p>
<p>6GHz频段是一个全球统一的连续频谱块, 范围从5925MHz扩展到7125MHz, 共计1200MHz频谱, 意味着额外提供了59个20MHz信道. 对比2.4GHz和5GHz, 6GHz频段的频谱资源比前两者相加还要多.</p>
<p>一个信道划分示例:</p>
<p><img src="/img/computer-network-4/18.png" alt=""></p>
<h3 id="MAC子层">MAC子层</h3>
<p>由于无线环境的不可靠性, 802.11在LLC子层使用确认无连接的服务. LLC子层对于所有基于802.11参考模型的协议都是一样的, 我们将主要关注MAC子层的功能.</p>
<p>MAC子层功能:</p>
<ul>
<li>无线信道的访问控制</li>
<li>寻址</li>
<li>差错控制</li>
<li>无线站点的移动管理</li>
</ul>
<h4 id="访问控制">访问控制</h4>
<p>确定由多个无线站点共享的无线信道的使用方式, 也就是当信道空闲时, 决定下一个该由谁传输数据.</p>
<p>信道的传输能力被划分为一个个时槽(time slot), 由访问控制来决定每个时槽由哪个无线站点或者接入点使用.</p>
<p>采用带冲突避免的载波侦听多路访问机制(<strong>CSMA/CA</strong>), 尽量避免冲突的发生.</p>
<p>802.11中MAC定义了两种操作模式来实现对共享信道的访问:</p>
<ul>
<li>分布式协调功能(DCF, Contention): 无任何中心控制手段, 所有站点竞争访问信道; 强制要求实现的操作.</li>
<li>点协调功能(PCF, Contention-Free): 使用AP或者基站来控制所有的通信; 可选的操作.</li>
</ul>
<p>802.11无线局域网中采用冲突避免CA而不是冲突检测CD, 在无线环境下更容易发生冲突, 并且很难检测到.</p>
<p>两种CSMA/CA操作:</p>
<ul>
<li>基本CSMA/CA: 采用物理信道侦听方法 , 该操作强制要求必须使用.</li>
<li>扩展CSMA/CA: 采用基于RTS/CTS的虚拟信道侦听方法, 该操作是可选的, 可以根据需要配置, 但在实际上, 目前所有WiFi设备默认都做了实现.</li>
</ul>
<h4 id="隐藏站点和暴露站点问题">隐藏站点和暴露站点问题</h4>
<p><img src="/img/computer-network-4/19.png" alt=""></p>
<p>隐藏站点问题: B向C发送时, 由于D听不到, 误以为可以发送数据, C接收失败</p>
<p>暴露站点问题: B向A发送时, C听到信道认为它不能向D发送数据, 但实际上不影响A和D接收</p>
<p>基本CSMA/CA不能解决这两个问题, 扩展的CSMA/CA机制可以解决隐藏站点问题.</p>
<p>基本CSMA/CA:</p>
<ul>
<li>载波侦听: 发送帧之前侦听无线信道是否空闲, 若是则进入冲突避免阶段, 若否则延迟直到信道空闲</li>
<li>冲突避免: 发送帧之前等待一个帧j间间隔IFS(InterFrame Spacing), 并确保在IFS时间内信道空闲.<br>
为了防止多个站点在等待IFS时间后同时发送而导致冲突, 与以太网类似, 引入了一个随机退避算法来选择一个退避时间 (backoff time)</li>
</ul>
<p><img src="/img/computer-network-4/20.png" alt=""></p>
<p>IFS确定了帧的发送优先级, IFS越短发送优先级越高</p>
<p>三种IFS:</p>
<ul>
<li>SIFS: Short IFS, 最高优先级, 用于ACK等控制帧</li>
<li>PIFS: PCF IFS, 等于SIFS+1, 中等优先级, 用于PCF(点协调功能, 轮询)操作模式下的帧</li>
<li>DIFS: DCF IFS, 等于SIFS+2, 最低优先级, 用于DCF(分布式协调功能, CSMA/CA)操作模式下的数据帧</li>
</ul>
<p><img src="/img/computer-network-4/21.png" alt=""></p>
<p>站点执行随机退避算法确定退避时间, 在0到竞争窗口CS之间随机选择一个值r, 退避时间为r倍时槽.</p>
<p>**竞争窗口CW(Contention Window)**采用类似以太网的指数退避算法设置: CW初始化为一个最小值<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi mathvariant="normal">C</mi><mi mathvariant="normal">W</mi></mrow><mrow><mi>m</mi><mi>i</mi><mi>n</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\mathrm{CW}_{min}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathrm" style="margin-right:0.01389em;">CW</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">min</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>, 当发送方认为发送的帧发生冲突时将CW加倍增大, 直到到达最大值<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi mathvariant="normal">C</mi><mi mathvariant="normal">W</mi></mrow><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\mathrm {CW}_{max}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathrm" style="margin-right:0.01389em;">CW</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ma</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>, 初始为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>k</mi></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^k-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9324em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>, 下一次为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^{k+1}-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9324em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>.</p>
<p><img src="/img/computer-network-4/22.png" alt=""></p>
<h4 id="接收方确认">接收方确认</h4>
<p>接收方发送ACK帧:</p>
<ul>
<li>接收方正确接收来自发送方的数据帧后发送ACK帧进行确认.</li>
<li>ACK帧不需要执行随机退避算法, 而是直接等待一个SIFS时间后就发送 .</li>
</ul>
<p>发送方未收到ACK帧:</p>
<ul>
<li>发送方执行指数退避算法, 将CW的值加倍, 并且将重传计数器加1, 然后重传数据帧, 此时需要再次使用CSMA/CA机制竞争信道.</li>
<li>CW从<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi mathvariant="normal">C</mi><mi mathvariant="normal">W</mi></mrow><mrow><mi>m</mi><mi>i</mi><mi>n</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\mathrm{CW}_{min}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathrm" style="margin-right:0.01389em;">CW</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">min</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>开始, 每次重传都将CW加倍, 直到到达<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi mathvariant="normal">C</mi><mi mathvariant="normal">W</mi></mrow><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\mathrm {CW}_{max}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathrm" style="margin-right:0.01389em;">CW</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ma</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>.</li>
<li>重传计数器到达一个设定的门限值时, 发送方将放弃发送数据帧, 并且返回一个错误.</li>
</ul>
<p><strong>发送方用随机退避算法选择退避时间, 即在0到CW之间选择一个随机数r, 退避时间即r倍的时槽. 而CW的确定采用的是指数退避算法, 从<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi mathvariant="normal">C</mi><mi mathvariant="normal">W</mi></mrow><mrow><mi>m</mi><mi>i</mi><mi>n</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\mathrm{CW}_{min}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathrm" style="margin-right:0.01389em;">CW</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">min</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>开始, 每次重传都加倍, 直到到达<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi mathvariant="normal">C</mi><mi mathvariant="normal">W</mi></mrow><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\mathrm {CW}_{max}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathrm" style="margin-right:0.01389em;">CW</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ma</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>.</strong></p>
<p><img src="/img/computer-network-4/23.png" alt=""></p>
<p>为什么不把这些相似甚至重复的东西合在一起讲呢, 合疑味.</p>
<h3 id="CSMA-CA-ACK">CSMA/CA+ACK</h3>
<p>发送方在DIFS时间内侦听到信道空闲直接发送数据帧, 不执行退避算法.</p>
<p><img src="/img/computer-network-4/24.png" alt=""></p>
<p>例:</p>
<p><img src="/img/computer-network-4/25.png" alt=""></p>
<h2 id="扩展局域网">扩展局域网</h2>
<h3 id="网桥">网桥</h3>
<p>Hub(集线器)是一种物理层设备, 网桥是用来连接局域网的互连设备, 工作在数据链路层.</p>
<p>转发局域网之间的数据帧, 必要时进行帧格式转换.</p>
<p>能隔离以太网中的碰撞域, 但不能隔离广播域.</p>
<p>丢弃出错帧.</p>
<p>工作原理如图.</p>
<p><img src="/img/computer-network-4/26.png" alt=""></p>
<p>功能:</p>
<ul>
<li><strong>不同帧的格式转换</strong>: 由于帧格式的不同, 需要重新组帧, 某些域需要丢弃或产生还需要重新生成检验和.</li>
<li><strong>不同的数据速率适配</strong>: 由于802.11速率低, 网桥需要用缓冲区存储来不及传输的帧.</li>
</ul>
<h3 id="交换式局域网">交换式局域网</h3>
<p>局域网中的共享链路问题:</p>
<ul>
<li>冲突(碰撞)降低了链路的传输效率</li>
<li>链路共享实际上是带宽共享, 用户的带宽得不到保障</li>
</ul>
<p>随着网络规模增大, 共享链路问题将越来越突出.</p>
<p>解决方案: 交换式局域网</p>
<ul>
<li>采用星型或树型拓扑结构, 用交换机或网桥连接多用户</li>
<li><strong>交换机和网桥工作在数据链路层, 能隔离碰撞域</strong></li>
</ul>
<p><img src="/img/computer-network-4/27.png" alt=""></p>
<p>扩展局域网(Extended LAN): 一个或者多个网桥或者交换机连接的局域网集合.</p>
<p>网桥或者交换机并不能隔离广播域, 因此扩展局域网仍然对应着一个广播域 .</p>
<p><img src="/img/computer-network-4/28.png" alt=""></p>
<h3 id="L2交换机">L2交换机</h3>
<p>L2交换机(switch)源自于多端口网桥(bridge), 一般采用存储转发方式将来自输入端口的帧交换到对应的输出端口.</p>
<p>交换机检测每个到达数据的帧头.</p>
<p>L2交换机的帧交换基于地址查找表(帧转发表), 对于输入端口的帧, 根据帧头中的目的地址查找转发表得到输出端口; 若帧转发表中没有对应的表项, 交换机就向所有端口(除接收端口)转发.</p>
<p>帧转发表是通过帧的源地址与到达端口的对应关系建立的.</p>
<p>存储转发: 从输入端口接收完整帧放入内存, 然后对帧进行校验, 若正确, 则根据目的MAC地址得到输出端口, 在输入和输出端口之间建立连接转发帧.</p>
<p><img src="/img/computer-network-4/29.png" alt=""></p>
<h3 id="帧转发表">帧转发表</h3>
<ul>
<li>功能: 在扩展局域网中, L2交换机或者网桥会在输入端口上接收帧, 然后根据帧转发表将这些帧向合适的输出端口发送.</li>
<li>格式: 每个表项由主机(一般用主机的MAC地址表示)和主机连接的端口组成.</li>
<li>生成: 源地址学习: 记录接收到的帧的源MAC地址; 每个表项都动态生成.</li>
</ul>
<p>为了强调帧转发表是由源MAC地址学习而来, 也被称为源地址表(Source Address Table).</p>
<p>举例: 略, 我写一下午了实在不想写了.</p>
<h3 id="生成树算法">生成树算法</h3>
<p>问题: 扩展局域网中可能存在环路, 造成帧永远在扩展局域中循环转发下去 .</p>
<p>环路产生原因:</p>
<ul>
<li>无法知道网络的整体情况而导致配置出现环路</li>
<li>提供故障时的冗余备份, 要避免的是转发环路, 而不是物理环路</li>
</ul>
<p>解决方法: 在交换机或者网桥上运行生成树算法, 为交换机或者网桥选择转发帧的端口, 从而避免帧转发时出现环路.</p>
<p><img src="/img/computer-network-4/30.png" alt=""></p>
<p>生成树算法的思想: 将扩展局域网看作是有环的图, 图的顶点表示网桥或者交换机, 图的边表示它们之间不仅直接相连, 而且还可以转发帧, 那么生成树就是覆盖这个图的所有顶点的无环子图(用于帧转发) .</p>
<p><img src="/img/computer-network-4/31.png" alt=""></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E7%AC%94%E8%AE%B0/" rel="tag"># 笔记</a>
              <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" rel="tag"># 计算机网络</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2025/10/2025-10-28/" rel="prev" title="2025-10-28">
                  <i class="fa fa-angle-left"></i> 2025-10-28
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2025/10/2025-10-30/" rel="next" title="2025-10-30">
                  2025-10-30 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">tianlipa</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>

</body>
</html>
